<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.his.dao.baseinfo.CheckInformationServiceMapDao" >
  <resultMap id="BaseResultMap" type="com.his.entity.baseinfo.CheckInformationServiceMap" >
    <id column="CheckServiceMapID" property="checkservicemapid" jdbcType="INTEGER" />
    <association property="checkInformation" column="CheckInfID" select="com.his.dao.baseinfo.CheckInformationDao.selectByPrimaryKey"></association>
  	<association property="serviceItem" column="ServiceItemID" select="com.his.dao.baseinfo.ServiceItemDao.selectByPrimaryKey"></association>
    
  </resultMap>
  <delete id="delete" parameterType="Map">
	delete from CheckInformationServiceMap
	<where>
		<if test="serviceitemid!=null and serviceitemid!=''">
			and ServiceItemID=#{serviceitemid,jdbcType=CHAR}
		</if>
		<if test="checkinfid!=null and checkinfid!=''">
			and CheckInfID = #{checkinfid,jdbcType=VARCHAR}
		</if>
	</where>
  </delete>
  
  <delete id="deleteByCheckInfID" parameterType="String">
    delete from CheckInformationServiceMap
    where ( CheckInfID=#{checkinfid} )
  </delete>
  
   <delete id="deleteByPrimaryKey" parameterType="Integer">
    delete from CheckInformationServiceMap where CheckServiceMapID=#{checkservicemapid}
  </delete>
  
  <insert id="insert" parameterType="com.his.entity.baseinfo.CheckInformationServiceMap">
    insert into CheckInformationServiceMap (CheckInfID,ServiceItemID)
    values (#{checkInformation.checkinfid,jdbcType=VARCHAR},#{serviceItem.serviceitemid,jdbcType=CHAR})
  </insert>
  
  <select id="findCheckInformationServiceMap" parameterType="Map" resultMap="BaseResultMap">
		select * from CheckInformationServiceMap
		<where>
			<!-- 查询某个检查分类拥有的角色 -->
			<if test="checkinfid!=null and checkinfid!=''">
				and CheckInfID=#{checkinfid}
			</if>
			<!-- checkinfid & serviceitemid 都存在时，查询某映射关系是否存在 -->
			<if test="serviceitemid!=null and serviceitemid!=''">
				and ServiceItemID=#{serviceitemid}
			</if>
		</where>
		<if test="start!=null and size!=null">
			order by CheckServiceMapID offset ${start} rows fetch next ${size} rows only
		</if>
  </select>
</mapper>