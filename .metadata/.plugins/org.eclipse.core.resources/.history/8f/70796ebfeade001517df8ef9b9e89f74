<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.his.dao.hospital.HosBillInfoDao">
	<resultMap id="BaseResultMap" type="com.his.entity.hospital.HosBillInfo">
		<id column="SerialID" property="serialid" jdbcType="CHAR" />
		<result column="PatientID" property="patientid" jdbcType="CHAR" />
		<result column="DeptID" property="deptid" jdbcType="VARCHAR" />
		<result column="InsureType" property="insuretype" jdbcType="INTEGER" />
		<result column="PreTotal" property="pretotal" jdbcType="DECIMAL" />
		<result column="CostTotal" property="costtotal" jdbcType="DECIMAL" />
		<result column="MakeUp" property="makeup" jdbcType="DECIMAL" />
		<result column="OtherMakeUpName1" property="othermakeupname1"
			jdbcType="NVARCHAR" />
		<result column="OtherMakeUpMoney1" property="othermakeupmoney1"
			jdbcType="DECIMAL" />
		<result column="OtherMakeUpName2" property="othermakeupname2"
			jdbcType="NVARCHAR" />
		<result column="OtherMakeUpMoney2" property="othermakeupmoney2"
			jdbcType="DECIMAL" />
		<result column="OtherMakeUpName3" property="othermakeupname3"
			jdbcType="NVARCHAR" />
		<result column="OtherMakeUpMoney3" property="othermakeupmoney3"
			jdbcType="DECIMAL" />
		<result column="BalTimes" property="baltimes" jdbcType="INTEGER" />
		<result column="BalDate" property="baldate" jdbcType="DATE" />
		<result column="Remarks" property="remarks" jdbcType="NVARCHAR" />
		<result column="InvoiceCode" property="invoicecode" jdbcType="NVARCHAR" />
		<result column="UnUsed1" property="unused1" jdbcType="NVARCHAR" />
		<result column="UnUsed2" property="unused2" jdbcType="NVARCHAR" />

		<association column="HosCode" property="hoscode"
			select="com.his.dao.hospital.HosRegisterDao.selectByPrimaryKey" />
		<association column="BalEmpID" property="balemp"
			select="com.his.dao.baseinfo.EmployeeDao.selectPartByPrimaryKey" />
	</resultMap>

	<sql id="Base_Column_List">
		SerialID, HosCode, PatientID, DeptID, InsureType, PreTotal,
		CostTotal, MakeUp,
		OtherMakeUpName1,
		OtherMakeUpMoney1,
		OtherMakeUpName2, OtherMakeUpMoney2, OtherMakeUpName3,
		OtherMakeUpMoney3,
		BalTimes, BalDate, BalEmpID, Remarks,
		InvoiceCode,UnUsed1, UnUsed2
	</sql>

	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		select
		<include refid="Base_Column_List" />
		from HosBillInfo
		where SerialID = #{serialid,jdbcType=CHAR}
	</select>

	<select id="selectByMap" parameterType="Map" resultMap="BaseResultMap">
		select * from HosBillInfo
		<where>
			<if test="serialid !=null and serialid !=''">
				and SerialID = #{serialid}
			</if>
			<if test="hoscode !=null and hoscode !=''">
				and HosCode = #{hoscode}
			</if>
			<if test="patientid !=null and patentid !=''">
				and PatientID = #{patientid}
			</if>
			<if test="deptid !=null and deptid !=''">
				and DeptID = #{deptid}
			</if>
			<if test="empid !=null and empid !=''">
				and BalEmpID = #{empid}
			</if>
		</where>
	</select>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		delete from
		HosBillInfo
		where SerialID = #{serialid,jdbcType=CHAR}
	</delete>

	<delete id="deleteByMap" parameterType="Map">
		delete from HosBillInfo
		<where>
			<if test="serialid !=null and serialid !=''">
				and SerialID = #{serialid}
			</if>
			<if test="hoscode !=null and hoscode !=''">
				and HosCode = #{hoscode}
			</if>
			<if test="patientid !=null and patentid !=''">
				and PatientID = #{patientid}
			</if>
			<if test="deptid !=null and deptid !=''">
				and DeptID = #{deptid}
			</if>
			<if test="empid !=null and empid !=''">
				and BalEmpID = #{empid}
			</if>
		</where>
	</delete>

	<insert id="insertSelective" parameterType="com.his.entity.hospital.HosBillInfo">
		insert into HosBillInfo
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="serialid != null">
				SerialID,
			</if>
			<if test="hoscode != null">
				HosCode,
			</if>
			<if test="patientid != null">
				PatientID,
			</if>
			<if test="deptid != null">
				DeptID,
			</if>
			<if test="insuretype != null">
				InsureType,
			</if>
			<if test="pretotal != null">
				PreTotal,
			</if>
			<if test="costtotal != null">
				CostTotal,
			</if>
			<if test="makeup != null">
				MakeUp,
			</if>
			<if test="othermakeupname1 != null">
				OtherMakeUpName1,
			</if>
			<if test="othermakeupmoney1 != null">
				OtherMakeUpMoney1,
			</if>
			<if test="othermakeupname2 != null">
				OtherMakeUpName2,
			</if>
			<if test="othermakeupmoney2 != null">
				OtherMakeUpMoney2,
			</if>
			<if test="othermakeupname3 != null">
				OtherMakeUpName3,
			</if>
			<if test="othermakeupmoney3 != null">
				OtherMakeUpMoney3,
			</if>
			<if test="baltimes != null">
				BalTimes,
			</if>
			<if test="baldate != null">
				BalDate,
			</if>
			<if test="balemp != null">
				BalEmpID,
			</if>
			<if test="remarks != null">
				Remarks,
			</if>
			<if test="invoicecode != null">
				InvoiceCode,
			</if>
			<if test="unused1 != null">
				UnUsed1,
			</if>
			<if test="unused2 != null">
				UnUsed2,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="serialid != null">
				#{serialid,jdbcType=CHAR},
			</if>
			<if test="hoscode != null">
				#{hoscode.hoscode,jdbcType=CHAR},
			</if>
			<if test="patientid != null">
				#{patientid,jdbcType=CHAR},
			</if>
			<if test="deptid != null">
				#{deptid,jdbcType=CHAR},
			</if>
			<if test="insuretype != null">
				#{insuretype,jdbcType=INTEGER},
			</if>
			<if test="pretotal != null">
				#{pretotal,jdbcType=DECIMAL},
			</if>
			<if test="costtotal != null">
				#{costtotal,jdbcType=DECIMAL},
			</if>
			<if test="makeup != null">
				#{makeup,jdbcType=DECIMAL},
			</if>
			<if test="othermakeupname1 != null">
				#{othermakeupname1,jdbcType=NVARCHAR},
			</if>
			<if test="othermakeupmoney1 != null">
				#{othermakeupmoney1,jdbcType=DECIMAL},
			</if>
			<if test="othermakeupname2 != null">
				#{othermakeupname2,jdbcType=NVARCHAR},
			</if>
			<if test="othermakeupmoney2 != null">
				#{othermakeupmoney2,jdbcType=DECIMAL},
			</if>
			<if test="othermakeupname3 != null">
				#{othermakeupname3,jdbcType=NVARCHAR},
			</if>
			<if test="othermakeupmoney3 != null">
				#{othermakeupmoney3,jdbcType=DECIMAL},
			</if>
			<if test="baltimes != null">
				#{baltimes,jdbcType=INTEGER},
			</if>
			<if test="baldate != null">
				#{baldate,jdbcType=DATE},
			</if>
			<if test="balemp != null">
				#{balemp.empid,jdbcType=CHAR},
			</if>
			<if test="remarks != null">
				#{remarks,jdbcType=NVARCHAR},
			</if>
			<if test="invoicecode != null">
				#{invoicecode,jdbcType=NVARCHAR},
			</if>
			<if test="unused1 != null">
				#{unused1,jdbcType=NVARCHAR},
			</if>
			<if test="unused2 != null">
				#{unused2,jdbcType=NVARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.his.entity.hospital.HosBillInfo">
		update HosBillInfo
		<set>
			<if test="hoscode != null">
				HosCode = #{hoscode.hoscode,jdbcType=CHAR},
			</if>
			<if test="patientid != null">
				PatientID = #{patientid,jdbcType=CHAR},
			</if>
			<if test="deptid != null">
				DeptID = #{deptid,jdbcType=CHAR},
			</if>
			<if test="insuretype != null">
				InsureType = #{insuretype,jdbcType=INTEGER},
			</if>
			<if test="pretotal != null">
				PreTotal = #{pretotal,jdbcType=DECIMAL},
			</if>
			<if test="costtotal != null">
				CostTotal = #{costtotal,jdbcType=DECIMAL},
			</if>
			<if test="makeup != null">
				MakeUp = #{makeup,jdbcType=DECIMAL},
			</if>
			<if test="othermakeupname1 != null">
				OtherMakeUpName1 = #{othermakeupname1,jdbcType=NVARCHAR},
			</if>
			<if test="othermakeupmoney1 != null">
				OtherMakeUpMoney1 =
				#{othermakeupmoney1,jdbcType=DECIMAL},
			</if>
			<if test="othermakeupname2 != null">
				OtherMakeUpName2 = #{othermakeupname2,jdbcType=NVARCHAR},
			</if>
			<if test="othermakeupmoney2 != null">
				OtherMakeUpMoney2 =
				#{othermakeupmoney2,jdbcType=DECIMAL},
			</if>
			<if test="othermakeupname3 != null">
				OtherMakeUpName3 = #{othermakeupname3,jdbcType=NVARCHAR},
			</if>
			<if test="othermakeupmoney3 != null">
				OtherMakeUpMoney3 =
				#{othermakeupmoney3,jdbcType=DECIMAL},
			</if>
			<if test="baltimes != null">
				BalTimes = #{baltimes,jdbcType=INTEGER},
			</if>
			<if test="baldate != null">
				BalDate = #{baldate,jdbcType=DATE},
			</if>
			<if test="balemp != null">
				BalEmpID = #{balemp.empid,jdbcType=CHAR},
			</if>
			<if test="remarks != null">
				Remarks = #{remarks,jdbcType=NVARCHAR},
			</if>
			<if test="invoicecode != null">
				InvoiceCode = #{invoicecode,jdbcType=NVARCHAR},
			</if>
			<if test="unused1 != null">
				UnUsed1 = #{unused1,jdbcType=NVARCHAR},
			</if>
			<if test="unused2 != null">
				UnUsed2 = #{unused2,jdbcType=NVARCHAR},
			</if>
		</set>
		where SerialID = #{serialid,jdbcType=CHAR}
	</update>
	<select id="findHosBillInfo" parameterType="Map" resultMap="BaseResultMap">
		select * from HosBillInfo
		<where>
			<if test="serialid !=null and serialid !=''">
				and SerialID = #{serialid}
			</if>
			<if test="hoscode !=null and hoscode !=''">
				and HosCode = #{hoscode}
			</if>
			<if test="patientid !=null and patentid !=''">
				and PatientID = #{patientid}
			</if>
			<if test="deptid !=null and deptid !=''">
				and DeptID = #{deptid}
			</if>
			<if test="empid !=null and empid !=''">
				and BalEmpID = #{empid}
			</if>
		</where>
		<if test="start!=null and size!=null">
			order by SerialID offset ${start} rows fetch next
			${size}
			rows only
		</if>
	</select>

	<select id="getTotalHosBillInfo" parameterType="Map" resultType="Long">
		select count(*) from HosBillInfo
		<where>
			<if test="serialid !=null and serialid !=''">
				and SerialID = #{serialid}
			</if>
			<if test="hoscode !=null and hoscode !=''">
				and HosCode = #{hoscode}
			</if>
			<if test="patientid !=null and patentid !=''">
				and PatientID = #{patientid}
			</if>
			<if test="deptid !=null and deptid !=''">
				and DeptID = #{deptid}
			</if>
			<if test="empid !=null and empid !=''">
				and BalEmpID = #{empid}
			</if>
		</where>
	</select>

	<select id="getSerialID" parameterType="Map" resultType="String">
		select MAX(SerialID) from HosBillInfo
		<where>
			<if test="prefix!=null and prefix!='' ">
				and SerialID like #{prefix}
			</if>
		</where>
	</select>
</mapper>